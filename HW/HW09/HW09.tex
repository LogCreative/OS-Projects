\documentclass[12pt,a4paper]{article}
\usepackage[UTF8]{ctex}     %先引入ctex
\usepackage[utf8]{inputenc} %再引入inputenc
\usepackage{graphicx}
\usepackage{lazylatex}
\usepackage{amsmath}
\usepackage{bookmark}
\usepackage{enumerate}
\usepackage{array}
\usepackage{xfp}
\usepackage{colortbl}
\usepackage{tikz}

\tcbuselibrary{documentation}
\graphicspath{{img/}}
% 边距
\geometry{left=2.0cm,right=2.0cm,top=2.0cm,bottom=3.0cm}
% 大题
\newenvironment{problems}{\begin{list}{}{\renewcommand{\makelabel}[1]{\textbf{##1}\hfil}}}{\end{list}}
% 小题
\newenvironment{steps}{\begin{list}{}{\renewcommand{\makelabel}[1]{##1.\hfil}}}{\end{list}}
% 答
\providecommand{\ans}{\textbf{答}:~}
% 解
\providecommand{\sol}{\textbf{解}.~}

\newcommand{\allpart}{2325}
\providecommand{\blk}[2]{\framebox[\fpeval{round(#2/\allpart*\textwidth*0.8,2)}pt]{#1}}

\begin{document}
\title{\normalsize \underline{操作系统(D)}\\\LARGE第 9 次作业}
\author{Log Creative }
\date{\today}
\maketitle

\begin{problems}
    \item[9.6] Given six memory partitions of 300KB, 600KB, 350KB, 200KB, 750KB,and 125KB (in order), how would the first-fit, best-fit, and worst-fit algorithms place processes of size 115KB, 500KB, 358KB, 200KB, and 375KB (in order)?
    
    \sol \begin{tabular}{cc}
         & \blk{}{300}\blk{}{600}\blk{}{350}\blk{}{200}\blk{}{750}\blk{}{125} \\
         \hline
        first-fit & \blk{115}{115}\blk{}{185}\blk{500}{500}\blk{}{100}\blk{}{350}\blk{200}{200}\blk{358}{358}\blk{375}{375}\blk{}{17}\blk{}{125}\\
        best-fit & \blk{}{300}\blk{500}{500}\blk{}{100}\blk{}{350}\blk{200}{200}\blk{358}{358}\blk{375}{375}\blk{}{17}\blk{115}{115}\blk{}{10}\\
        worst-fit & \blk{200}{200}\blk{}{100}\blk{358}{358}\blk{}{242}\blk{}{350}\blk{}{200}\blk{115}{115}\blk{500}{500}\blk{}{135}\blk{}{125}
    \end{tabular}

    worst-fit 中，375KB 无法分配。
    \item[9.7] Assuming a 1-KB page size, what are the page numbers and offsets for the following address references (provided as decimal numbers):
    \begin{enumerate}[a.]
        \item 3085
        \item 42095
        \item 215201
        \item 650000
        \item 2000001
    \end{enumerate} 

    \sol \begin{tabular}{r|r>{\ttfamily}r>{\ttfamily}r}
            & 地址 & 页码 & 偏移 \\
            \hline
        3085 & \fbox{\texttt{11}}\fbox{\texttt{00 0000 1101}} & 0x003 & 0x00D \\
        42095 & \fbox{\texttt{1010 01}}\fbox{\texttt{00 0110 1111}} & 0x029 & 0x06F \\
        215201 & \fbox{\texttt{11 0100 10}}\fbox{\texttt{00 1010 0001}} & 0x0D2 & 0x0A1\\
        650000 & \fbox{\texttt{1001 1110 10}}\fbox{\texttt{11 0001 0000}} & 0x27A & 0x310\\
        2000001 & \fbox{\texttt{1 1110 1000 01}}\fbox{\texttt{00 1000 0001}} & 0x7A1 & 0x081
    \end{tabular}

    \item[9.9] Consider a logical address space of 256 pages with a 4-KB page size, mapped onto a physical memory of 64 frames.
    \begin{enumerate}[a.]
        \item How many bits are required in the logical address?
        
        \sol \begin{align*}
            256 &= 2^8\\
            4\text{KB} &= 2^{12} \text{B}
        \end{align*}
        逻辑地址需要 20 字节。

        \item How many bits are required in the physical address?
        
        \sol \begin{align*}
            64 &= 2^6\\
            4\text{KB} &= 2^{12} \text{B}
        \end{align*}
        物理地址需要 18 字节。
    \end{enumerate} 
    \item[9.10]  Consider a computer system with a 32-bit logical address and 4-KB pagesize. The system supports up to 512MB of physical memory. How many entries are there in each of the following?
    \begin{enumerate}[a.]
        \item A conventional, single-level page table
        
        \sol $2^{32-12}=2^{20}$ 项。
        \item An inverted page table
        
        \sol 倒置页表整个系统只有一个页表，并且每个物理内存的页只有一条对应的条目，所以共有 $512 \text{M}/4\text{K}=128$ 项。
    \end{enumerate} 
\end{problems}

\end{document}
