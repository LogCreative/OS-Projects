\documentclass[12pt,a4paper]{article}
\usepackage[UTF8]{ctex}     %先引入ctex
\usepackage[utf8]{inputenc} %再引入inputenc
\usepackage{graphicx}
\usepackage{lazylatex}
\usepackage{amsmath}
\usepackage{bookmark}
\usepackage{enumerate}
\usepackage{array}
\usepackage{xfp}
\usepackage{colortbl}
\usepackage{tikz}

\tcbuselibrary{documentation}
\graphicspath{{img/}}
% 边距
\geometry{left=2.0cm,right=2.0cm,top=2.0cm,bottom=3.0cm}
% 大题
\newenvironment{problems}{\begin{list}{}{\renewcommand{\makelabel}[1]{\textbf{##1}\hfil}}}{\end{list}}
% 小题
\newenvironment{steps}{\begin{list}{}{\renewcommand{\makelabel}[1]{##1.\hfil}}}{\end{list}}
% 答
\providecommand{\ans}{\textbf{答}:~}
% 解
\providecommand{\sol}{\textbf{解}.~}

\newcommand{\allpart}{2325}
\providecommand{\blk}[2]{\framebox[\fpeval{round(#2/\allpart*\textwidth*0.8,2)}pt]{#1}}

\begin{document}
\title{\normalsize \underline{操作系统(D)}\\\LARGE第 10 次作业}
\author{Log Creative }
\date{\today}
\maketitle

\begin{problems}
    \item[10.5] Consider the page table for a system with 12-bit virtual and physical addresses and 256-byte pages.
    
    \begin{tabular}{cc}
        \hline
        Page & Page Frame \\
        \hline
        0 & - \\
        1 & 2 \\
        2 & C \\
        3 & A \\
        4 & - \\
        5 & 4 \\
        6 & 3 \\
        7 & - \\
        8 & B \\
        9 & 0 \\
        \hline
    \end{tabular}

    The list of free page frames is $D,E,F$(that is,$D$ is at the head of the list,$E$ is second, and $F$ is last). A dash for a page frame indicates that thepage is not in memory.
    
    Convert the following virtual addresses to their equivalent physical addresses in hexadecimal. All numbers are given in hexadecimal.

    \begin{itemize}
        \item 9EF
        \item 111
        \item 700
        \item 0FF
    \end{itemize}

    \sol 256B = $2^8$B，所以第一个十六进制位为虚拟页码。

    \begin{itemize}
        \item 9EF $\rightarrow$ 0EF
        \item 111 $\rightarrow$ 211
        \item 700 $\rightarrow$ D00 缺页错误，需要引入新的 D 帧。
        \item 0FF $\rightarrow$ EFF 缺页错误，需要按照顺序引入 E 帧。
    \end{itemize}

    \item[10.7] Consider the two-dimensional array \verb"A":
     
    \begin{lstlisting}
        int A[][] = new int[100][100];
    \end{lstlisting} 
    where \verb"A[0][0]" is at location 200 in a paged memory system with pages of size 200. A small process that manipulates the matrix resides in page0 (locations 0 to 199). Thus, every instruction fetch will be from page 0.
    
    For three page frames, how many page faults are generated by the following array-initialization loops? Use LRU replacement, and assume
    that page frame 1 contains the process and the other two are initially empty.
    \begin{enumerate}[a.]
        \item \begin{verbatim}
            for (int j = 0; j < 100; j++)
                for (int i = 0; i < 100; i++)
                    A[i][j] = 0;
        \end{verbatim}
        \item \begin{verbatim}
            for (int i = 0; i < 100; i++)
                for (int j = 0; j < 100; j++)
                    A[i][j] = 0;
        \end{verbatim}
    \end{enumerate}

    \sol \begin{enumerate}
        \item $10000/2=5000$ 由于页大小是200，所以相邻的两次访问是在同一页的。因为只有两个可用页帧，所以每两次都会导致缺页错误，LRU 在这里会替换最先进入的，100次访问才会访问同一行，大于页帧数 2。
        \item $100/2=50$ 因为按照行访问都在页帧内，所以100次内不会出现缺页错误。由于一页可以存储2行，所以两行内不会出现缺页错误。
    \end{enumerate}

    \item[10.8] Consider the following page reference string:
    \begin{center}
        1, 2, 3, 4, 2, 1, 5, 6, 2, 1, 2, 3, 7, 6, 3, 2, 1, 2, 3, 6
    \end{center}
    How many page faults would occur for the following replacement algorithms, assuming one, two, three, four, five, six, and seven frames?Remember that all frames are initially empty, so your first unique pages will cost one fault each.
    \begin{itemize}
        \item LRU replacement
        \item FIFO replacement
        \item Optimal replacement
    \end{itemize}

    \sol 

    \begin{tabular}{c|ccccccc}
        \hline
        Method & one & two & three & four & five & six & seven \\
        \hline
        LRU     & 20 & 18 & 15 & 10 & 8  & 7  & 7 \\
        FIFO    & 20 & 18 & 16 & 14 & 10 & 10 & 7 \\
        Optimal & 20 & 15 & 11 & 8  & 7  & 7  & 7 \\
        \hline
    \end{tabular}

    \item[10.9]  Consider the following page reference string:
    \begin{center}
        7, 2, 3, 1, 2, 5, 3, 4, 6, 7, 7, 1, 0, 5, 4, 6, 2, 3, 0 , 1
    \end{center} 
    Assuming demand paging with three frames, how many page faults would occur for the following replacement algorithms?
    \begin{itemize}
        \item LRU replacement
        \item FIFO replacement
        \item Optimal replacement
    \end{itemize}

    \sol \begin{itemize}
        \item LRU 共 18 次。
        
        \begin{tabular}{c|cccccccccccccccccccc}
            &7& & &1& & &3& & &7&\textcolor{gray}{7}& & &5& & &2& & &1\\
            & &2& & &\textcolor{gray}{2}& & &4& & & &1& & &4& & &3& & \\
            & & &3& & &5& & &6& & & &0& & &6& & &0& 
        \end{tabular}
        \item FIFO 共 17 次。
        
        \begin{tabular}{c|cccccccccccccccccccc}
            &7& & &1& & & &4& & & &1& & &4& & &3& & \\
            & &2& & &\textcolor{gray}{2}&5& & &6& & & &0& & &6& & &0& \\
            & & &3& & & &\textcolor{gray}{3}& & &7&\textcolor{gray}{7}& & &5& & &2& & &1 
        \end{tabular}

        \item Optimal 共 13 次。
        
        \begin{tabular}{c|cccccccccccccccccccc}
            &7& & &1& & & & & & & &\textcolor{gray}{1}& & & & & & & &\textcolor{gray}{1}\\
            & &2& & &\textcolor{gray}{2}&5& & & & & & & &\textcolor{gray}{5}&4&6&2&3& & \\
            & & &3& & & &\textcolor{gray}{3}&4&6&7&\textcolor{gray}{7}& &0& & & & & &\textcolor{gray}{0}& 
        \end{tabular}
    \end{itemize}
\end{problems}

\end{document}
